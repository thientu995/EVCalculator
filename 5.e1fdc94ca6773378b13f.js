(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{FB8J:function(t,e,a){"use strict";a.r(e),a.d(e,"HistogramModule",(function(){return d}));var r=a("ofXK"),i=a("3Pt+"),n=a("tyNb"),o=a("fXoL"),l=a("jhN1"),s=a("Sy1n");const c=["canvasHistogram"],h=["canvasHistogramColor"],g=[{path:"",component:(()=>{class t{constructor(t,e,a){this.sanitizer=t,this.titleService=e,this.app=a,this.title="Histogram",this.dataFileUpload=null,a.title=this.title,e.setTitle(this.title)}ngOnInit(){}handleFileInput(t){let e=t.target.files;e&&e[0]&&this.getDataFile(e[0])}handleProcessImg(t){let e=this.getDataImg(t.target);this.getCanvas(e,this.canvasHistogram.nativeElement,!1),this.getCanvas(e,this.canvasHistogramColor.nativeElement,!0)}handleAllowDrop(t){t.preventDefault()}handleDrop(t){t.preventDefault();let e=t.dataTransfer.files;e&&e[0]&&this.getDataFile(e[0])}handleClick(t){document.querySelector('input[type="file"]').click()}getDataFile(t){let e=window.URL;this.dataFileUpload=this.sanitizer.bypassSecurityTrustResourceUrl(e.createObjectURL(t))}getCanvas(t,e,a){const r=new Uint32Array(t.data.buffer);let i=new Array(256).fill(0),n=new Array(256).fill(0),o=new Array(256).fill(0),l=new Array(256).fill(0);for(let d=0;d<r.length;d++){let t=255&r[d],e=r[d]>>8&255,a=r[d]>>16&255;i[t]++,i[e]++,i[a]++,n[t]++,o[e]++,l[a]++}let s=0;if(a)for(let d=1;d<256;d++)s<i[d]&&(s=i[d]);else for(let d=0;d<256;d++)s<n[d]?s=n[d]:s<o[d]?s=o[d]:s<l[d]&&(s=l[d]);const c=e.getContext("2d");let h=e.height-8,g=e.width/256,b=h/s;c.lineWidth=g,c.fillStyle="#fff",c.fillRect(0,0,e.width,e.height);for(let d=0;d<256;d++){let t=d*g;a?(c.strokeStyle="#000000",c.beginPath(),c.moveTo(t,h),c.lineTo(t,h-i[d]*b),c.closePath(),c.stroke()):(c.strokeStyle="rgba(220,0,0,0.5)",c.beginPath(),c.moveTo(t,h),c.lineTo(t,h-n[d]*b),c.closePath(),c.stroke(),c.strokeStyle="rgba(0,210,0,0.5)",c.beginPath(),c.moveTo(t,h),c.lineTo(t,h-o[d]*b),c.closePath(),c.stroke(),c.strokeStyle="rgba(0,0,255,0.5)",c.beginPath(),c.moveTo(t,h),c.lineTo(t,h-l[d]*b),c.closePath(),c.stroke()),c.strokeStyle="rgb("+d+", "+d+", "+d+")",c.beginPath(),c.moveTo(t,h),c.lineTo(t,e.height),c.closePath(),c.stroke()}}getDataImg(t){const e=document.createElement("canvas"),a=e.getContext("2d"),r=document.getElementsByTagName("img")[0];return e.width=t.width,e.height=t.height,a.drawImage(r,0,0),a.getImageData(0,0,t.width,t.height)}}return t.\u0275fac=function(e){return new(e||t)(o.Hb(l.b),o.Hb(l.c),o.Hb(s.a))},t.\u0275cmp=o.Bb({type:t,selectors:[["app-histogram"]],viewQuery:function(t,e){var a;1&t&&(o.lc(c,!0),o.lc(h,!0)),2&t&&(o.ac(a=o.Sb())&&(e.canvasHistogram=a.first),o.ac(a=o.Sb())&&(e.canvasHistogramColor=a.first))},decls:14,vars:1,consts:[[1,"w3-row","w3-center"],[1,"w3-col","s12","w3-padding"],[1,"w3-panel","w3-light-grey","w3-border","w3-border-red","w3-hover-border-green","w3-leftbar","w3-rightbar","w3-topbar","w3-bottombar",2,"height","150px","line-height","150px","cursor","pointer",3,"drop","dragover","click"],[1,"w3-xxxlarge"],["type","file","accept","image/*",1,"w3-hide",3,"change"],[1,"w3-col","m6","s12","w3-padding"],["width","250","height","150",1,"w3-border"],["canvasHistogram",""],["canvasHistogramColor",""],[2,"max-width","100vw",3,"src","load"]],template:function(t,e){1&t&&(o.Kb(0,"div",0),o.Kb(1,"div",1),o.Kb(2,"div",2),o.Rb("drop",(function(t){return e.handleDrop(t)}))("dragover",(function(t){return e.handleAllowDrop(t)}))("click",(function(t){return e.handleClick(t)})),o.Kb(3,"label",3),o.hc(4,"Click or Drop to upload"),o.Jb(),o.Jb(),o.Kb(5,"input",4),o.Rb("change",(function(t){return e.handleFileInput(t)})),o.Jb(),o.Jb(),o.Kb(6,"div",5),o.Ib(7,"canvas",6,7),o.Jb(),o.Kb(9,"div",5),o.Ib(10,"canvas",6,8),o.Jb(),o.Kb(12,"div",1),o.Kb(13,"img",9),o.Rb("load",(function(t){return e.handleProcessImg(t)})),o.Jb(),o.Jb(),o.Jb()),2&t&&(o.xb(13),o.Wb("src",e.dataFileUpload,o.dc))},styles:[""]}),t})()}];let b=(()=>{class t{}return t.\u0275mod=o.Fb({type:t}),t.\u0275inj=o.Eb({factory:function(e){return new(e||t)},imports:[[n.b.forChild(g)],n.b]}),t})(),d=(()=>{class t{}return t.\u0275mod=o.Fb({type:t}),t.\u0275inj=o.Eb({factory:function(e){return new(e||t)},imports:[[r.b,i.b,b]]}),t})()}}]);